<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Level 300: Organization Data CUR Connection on AWS Well-Architected Labs</title><link>https://wellarchitectedlabs.com/cost/300_labs/300_organization_data_cur_connection/</link><description>Recent content in Level 300: Organization Data CUR Connection on AWS Well-Architected Labs</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Thu, 22 Oct 2020 11:16:08 -0400</lastBuildDate><atom:link href="https://wellarchitectedlabs.com/cost/300_labs/300_organization_data_cur_connection/index.xml" rel="self" type="application/rss+xml"/><item><title>Create Static Resources</title><link>https://wellarchitectedlabs.com/cost/300_labs/300_organization_data_cur_connection/1_create_static_resources_source/</link><pubDate>Wed, 21 Oct 2020 11:16:08 -0400</pubDate><guid>https://wellarchitectedlabs.com/cost/300_labs/300_organization_data_cur_connection/1_create_static_resources_source/</guid><description>Create Amazon S3 Bucket and Folders Weâ€™ll create an S3 bucket to store the organizations data to be combined with your cost and usage report. This will hold your organisation data so we can connect it to Athena.
Login via SSO to your Cost Optimization account, go into the S3 console: Click Create bucket and create a bucket. You will need to use a unique bucket name with cost at the start, (we have used cost-aws-lab-organisation-bucket).</description></item><item><title>Create Automation Resources</title><link>https://wellarchitectedlabs.com/cost/300_labs/300_organization_data_cur_connection/2_create_automation_resources_source/</link><pubDate>Wed, 21 Oct 2020 11:16:08 -0400</pubDate><guid>https://wellarchitectedlabs.com/cost/300_labs/300_organization_data_cur_connection/2_create_automation_resources_source/</guid><description>Setup an AWS Lambda function to retrieve AWS Organizations information Create the On-Demand AWS Lambda function to get the AWS Organizations information, and extract the required parts from it then write to our bucket in Amazon S3.
Return to your Sub account for the rest of this lab. Go to the Lambda service page : Click Create function: Enter the following details:
Select: Author from scratch Function name: Lambda_Org_Data Runtime: Python (Latest) Open Change default execution role Execution Role: Use an existing role Role name: LambdaOrgRole Click Create function</description></item><item><title>Utilize Organization Data Source</title><link>https://wellarchitectedlabs.com/cost/300_labs/300_organization_data_cur_connection/3_utilize_organization_data_source/</link><pubDate>Sun, 26 Jul 2020 11:16:08 -0400</pubDate><guid>https://wellarchitectedlabs.com/cost/300_labs/300_organization_data_cur_connection/3_utilize_organization_data_source/</guid><description>Create the Organisations Data Table In this section we will create the AWS Organizations table in Amazon Athena. This can then be used to connect to the AWS Cost &amp;amp; Usage Report (CUR) or other data sets you have, to show you the names and emails of your accounts.
Go to the Athena service page We are going to create the Organizations table. This can be done in any of the databases that holds your Cost &amp;amp; Usage Report.</description></item><item><title>Visualize Organization Data in QuickSight</title><link>https://wellarchitectedlabs.com/cost/300_labs/300_organization_data_cur_connection/4_visualize_organization_data_in_quicksight/</link><pubDate>Sun, 26 Jul 2020 11:16:08 -0400</pubDate><guid>https://wellarchitectedlabs.com/cost/300_labs/300_organization_data_cur_connection/4_visualize_organization_data_in_quicksight/</guid><description>Join your AWS Organizations data with the AWS Cost &amp;amp; Usage Report in Amazon Quicksight In Amazon Quicksight we will add to the existing AWS Cost &amp;amp; Usage Report from the Cost Visualization lab.
Log on to the console via SSO, go to the QuickSight service, Enter your email address and click Continue: Click Manage data in the top right: In your data set click on the Cost &amp;amp; Usage dataset you have already created.</description></item><item><title>Join with the Enterprise Cost Intelligence Dashboard</title><link>https://wellarchitectedlabs.com/cost/300_labs/300_organization_data_cur_connection/5_join_cost_intelligence_dashboard/</link><pubDate>Sun, 26 Jul 2020 11:16:08 -0400</pubDate><guid>https://wellarchitectedlabs.com/cost/300_labs/300_organization_data_cur_connection/5_join_cost_intelligence_dashboard/</guid><description>Join with the Enterprise Cost Intelligence Dashboard This section is optional and shows how you can add your AWS Organization Datas to your Enterprise Dashboards - 200_Enterprise_Dashboards .
This example will show you how to map your Enterprise Dashboard linked_account_id to your Organizations account_number to add account information that is meaningful to your organization. This is to replace this step: https://wellarchitectedlabs.com/cost/200_labs/200_enterprise_dashboards/2_modify_cost_intelligence/.
Go to the Amazon QuickSight service homepage</description></item><item><title>Bonus Organization Tags</title><link>https://wellarchitectedlabs.com/cost/300_labs/300_organization_data_cur_connection/6_bonus_org_tags/</link><pubDate>Sun, 26 Jul 2020 11:16:08 -0400</pubDate><guid>https://wellarchitectedlabs.com/cost/300_labs/300_organization_data_cur_connection/6_bonus_org_tags/</guid><description>Update the Amazon Lambda Function to retrieve AWS Organizations tags To get the Organizations tags, we need to update the Lambda function to pull this information too. We will be swapping from csv to json as this will allow us to have flexibility with Amazon Athena as different accounts might have different tags.
Go to the Lambda service page: Search for the function Lambda_Org_Data and click on the name Scroll down to the Function Code section and replace the code with the one below, change (account id) to your Management Account ID and (Region) to the Region you are deploying in:</description></item><item><title>Teardown</title><link>https://wellarchitectedlabs.com/cost/300_labs/300_organization_data_cur_connection/7_teardown/</link><pubDate>Mon, 26 Oct 2020 11:10:08 -0400</pubDate><guid>https://wellarchitectedlabs.com/cost/300_labs/300_organization_data_cur_connection/7_teardown/</guid><description>The following resources were created in this lab:
Amazon QuickSight Dataset: organisation_data Amazon Athena Table: organisation_data Amazon CloudWatch Event, Rule: Lambda_Org_Data AWS Lambda Functions: Lambda_Org_Data IAM Policy: LambdaOrgPolicy IAM Role: LambdaOrgRole IAM Policy: ListOrganizations IAM Role: OrganizationLambdaAccessRole S3 Bucket: (custom name) function prevStep(){ window.open("..\/6_bonus_org_tags\/", "_self") } function nextStep(){ window.open("\/cost\/", "_self") } function togglePopup(){ document.getElementById("prevnext-1").classList.toggle("active"); } X Congratulations! Now that you have completed the lab, if you have implemented this knowledge in your environment, you should re-evaluate the questions in the Well-Architected tool.</description></item></channel></rss>